################################################################################
##  plot_data.R: R script to plot the time series of YNP bison counts and
##  the West Yellowstone SNOTEL soil water equivalent (annual mean).
##
##  ____________________________________________________________________________
##  Author:       Andrew Tredennick (atredenn@gmail.com)
##  Date created: December 1, 2017
################################################################################
##  Clear everything
rm(list = ls(all.names = TRUE))
##  Set working directory to source file location
root <- "~/Repos/bison_forecast/"
setwd(paste0(root,"code/"))
####
####  LOAD LIBRARIES ----
####
library(tidyverse) # Data science functions
library(dplyr)     # Data wrangling
library(ggthemes)  # Pleasing themes for ggplot2
library(cowplot)   # Combining ggplots
source("./utilities/plotting_theme.R") # Source my plotting theme
####
####  LOAD DATA ----------------------------------------------------------------
####
snow_ynp  <- read.csv("../data/west_yellowstone_snotel_summary.csv", row.names = 1)
bison_raw <- read.csv("../data/YNP_bison_population_size.csv")
bison_dat <- bison_raw %>%
dplyr::select(-source) %>%     # drop the source column
mutate(set = ifelse(year < 2011, "training", "validation")) %>% # make new column for data splits
left_join(snow_ynp, by="year") # merge in SNOTEL data
####
####  PLOT BISON AND SNOW DATA -------------------------------------------------
####
plot_data <- bison_dat %>%
dplyr::select(year, set, count.mean, count.sd, accumulated_snow_water_equiv_mm) %>%
dplyr::rename(avg_swe = accumulated_snow_water_equiv_mm)
names(bison_dat)
source('~/Repos/bison_forecast/code/plot_data.R')
